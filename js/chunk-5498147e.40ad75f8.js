(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5498147e"],{"0bed":function(t,a,e){},"0ddc":function(t,a,e){"use strict";e("b554")},"0e20":function(t,a,e){"use strict";e.d(a,"e",(function(){return r})),e.d(a,"f",(function(){return i})),e.d(a,"a",(function(){return c})),e.d(a,"c",(function(){return n})),e.d(a,"d",(function(){return o})),e.d(a,"b",(function(){return l}));var s=e("ca6e");const r=t=>t>999?(t/1e3).toFixed(1)+"k":t,i=(t,a=" ")=>{if(!t)return"";const e=t.toString(),s=e.split(a),r=[];return s.forEach(t=>{const a=t.charAt(0).toUpperCase()+t.slice(1);r.push(a)}),r.join(" ")},c=t=>{if(!t)return"";const a=t.split(" ");return a.map(t=>t.charAt(0).toUpperCase()).join("")},n=(t,a={month:"short",day:"numeric",year:"numeric"})=>t?new Intl.DateTimeFormat("en-US",a).format(new Date(t)):t,o=(t,a=!0)=>{const e=new Date(t);let r={month:"short",day:"numeric"};return a&&Object(s["c"])(e)&&(r={hour:"numeric",minute:"numeric"}),new Intl.DateTimeFormat("en-US",r).format(new Date(t))},l=t=>t.replace(/<\/?[^>]+(>|$)/g,"")},"16a3":function(t,a,e){"use strict";e("0bed")},"1bd7":function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var s=e("4360"),r=e("ed09");const i=()=>{const t=Object(r["ref"])(!1),a=Object(r["computed"])(()=>s["a"].getters["app/currentBreakPoint"]);return Object(r["watch"])(a,(a,e)=>{"md"===e&&"lg"===a&&(t.value=!1)}),{mqShallShowLeftSidebar:t}}},aa5c:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"chats"},t._l(t.formattedChatData.formattedChatLog,(function(a,s){return e("div",{key:a.senderId+String(s),staticClass:"chat",class:{"chat-left":a.senderId===t.formattedChatData.contact.id}},[e("div",{staticClass:"chat-avatar"},[e("b-avatar",{staticClass:"avatar-border-2 box-shadow-1",attrs:{size:"36",variant:"transparent",src:a.senderId===t.formattedChatData.contact.id?t.formattedChatData.contact.avatar:t.profileUserAvatar}})],1),e("div",{staticClass:"chat-body"},t._l(a.messages,(function(a){return e("div",{key:a.time,staticClass:"chat-content"},[e("p",[t._v(t._s(a.msg))])])})),0)])})),0)},r=[],i=e("ed09"),c=e("e8a3"),n={components:{BAvatar:c["a"]},props:{chatData:{type:Object,required:!0},profileUserAvatar:{type:String,required:!0}},setup(t){const a=Object(i["computed"])(()=>{const a={id:t.chatData.contact.id,avatar:t.chatData.contact.avatar};let e=[];t.chatData.chat&&(e=t.chatData.chat.chat);const s=[];let r=e[0]?e[0].senderId:void 0,i={sender:r,messages:[]};return e.forEach((t,a)=>{r===t.senderId?i.messages.push({msg:t.message,time:t.time}):(r=t.senderId,s.push(i),i={senderId:t.senderId,messages:[{msg:t.message,time:t.time}]}),a===e.length-1&&s.push(i)}),{formattedChatLog:s,contact:a,profileUserAvatar:t.profileUserAvatar}});return{formattedChatData:a}}},o=n,l=e("2877"),u=Object(l["a"])(o,s,r,!1,null,null,null);a["a"]=u.exports},b554:function(t,a,e){},c8ee:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{height:"inherit"}},[e("div",{staticClass:"body-content-overlay",class:{show:t.shallShowUserProfileSidebar||t.shallShowActiveChatContactSidebar||t.mqShallShowLeftSidebar},on:{click:function(a){t.mqShallShowLeftSidebar=t.shallShowActiveChatContactSidebar=t.shallShowUserProfileSidebar=!1}}}),e("section",{staticClass:"chat-app-window"},[t.activeChat.contact?e("div",{staticClass:"active-chat"},[e("div",{staticClass:"chat-navbar"},[e("header",{staticClass:"chat-header"},[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"sidebar-toggle d-block d-lg-none mr-1"},[e("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"MenuIcon",size:"21"},on:{click:function(a){t.mqShallShowLeftSidebar=!0}}})],1),e("b-avatar",{staticClass:"mr-1 cursor-pointer badge-minimal",attrs:{size:"36",src:t.activeChat.contact.avatar,badge:"","badge-variant":t.resolveAvatarBadgeVariant(t.activeChat.contact.status)},nativeOn:{click:function(a){t.shallShowActiveChatContactSidebar=!0}}}),e("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t.activeChat.contact.fullName)+" ")])],1),e("div",{staticClass:"d-flex align-items-center"},[e("feather-icon",{staticClass:"cursor-pointer d-sm-block d-none mr-1",attrs:{icon:"PhoneCallIcon",size:"17"}}),e("feather-icon",{staticClass:"cursor-pointer d-sm-block d-none mr-1",attrs:{icon:"VideoIcon",size:"17"}}),e("feather-icon",{staticClass:"cursor-pointer d-sm-block d-none mr-50",attrs:{icon:"SearchIcon",size:"17"}}),e("div",{staticClass:"dropdown"},[e("b-dropdown",{attrs:{variant:"link","no-caret":"","toggle-class":"p-0",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("feather-icon",{staticClass:"align-middle text-body",attrs:{icon:"MoreVerticalIcon",size:"17"}})]},proxy:!0}])},[e("b-dropdown-item",[t._v(" View Contact ")]),e("b-dropdown-item",[t._v(" Mute Notifications ")]),e("b-dropdown-item",[t._v(" Block Contact ")]),e("b-dropdown-item",[t._v(" Clear Chat ")]),e("b-dropdown-item",[t._v(" Report ")])],1)],1)],1)])]),e("vue-perfect-scrollbar",{ref:"refChatLogPS",staticClass:"user-chats scroll-area",attrs:{settings:t.perfectScrollbarSettings}},[e("chat-log",{attrs:{"chat-data":t.activeChat,"profile-user-avatar":t.profileUserDataMinimal.avatar}})],1),e("b-form",{staticClass:"chat-app-form",on:{submit:function(a){return a.preventDefault(),t.sendMessage.apply(null,arguments)}}},[e("b-input-group",{staticClass:"input-group-merge form-send-message mr-1"},[e("b-form-input",{attrs:{placeholder:"Enter your message"},model:{value:t.chatInputMessage,callback:function(a){t.chatInputMessage=a},expression:"chatInputMessage"}})],1),e("b-button",{attrs:{variant:"primary",type:"submit"}},[t._v(" Send ")])],1)],1):e("div",{staticClass:"start-chat-area"},[e("div",{staticClass:"mb-1 start-chat-icon"},[e("feather-icon",{attrs:{icon:"MessageSquareIcon",size:"56"}})],1),e("h4",{staticClass:"sidebar-toggle start-chat-text",on:{click:t.startConversation}},[t._v(" Start Conversation ")])])]),e("chat-active-chat-content-details-sidedbar",{attrs:{"shall-show-active-chat-contact-sidebar":t.shallShowActiveChatContactSidebar,contact:t.activeChat.contact||{}},on:{"update:shallShowActiveChatContactSidebar":function(a){t.shallShowActiveChatContactSidebar=a},"update:shall-show-active-chat-contact-sidebar":function(a){t.shallShowActiveChatContactSidebar=a}}}),e("portal",{attrs:{to:"content-renderer-sidebar-left"}},[e("chat-left-sidebar",{attrs:{"chats-contacts":t.chatsContacts,contacts:t.contacts,"active-chat-contact-id":t.activeChat.contact?t.activeChat.contact.id:null,"shall-show-user-profile-sidebar":t.shallShowUserProfileSidebar,"profile-user-data":t.profileUserData,"profile-user-minimal-data":t.profileUserDataMinimal,"mq-shall-show-left-sidebar":t.mqShallShowLeftSidebar},on:{"update:shallShowUserProfileSidebar":function(a){t.shallShowUserProfileSidebar=a},"update:shall-show-user-profile-sidebar":function(a){t.shallShowUserProfileSidebar=a},"update:mqShallShowLeftSidebar":function(a){t.mqShallShowLeftSidebar=a},"update:mq-shall-show-left-sidebar":function(a){t.mqShallShowLeftSidebar=a},"show-user-profile":t.showUserProfileSidebar,"open-chat":t.openChatOfContact}})],1)],1)},r=[],i=e("4360"),c=e("ed09"),n=e("e8a3"),o=e("dd9a"),l=e("9eaa"),u=e("11de"),d=e("5e12"),h=e("4797"),p=e("1947"),f=e("9d63"),b=e.n(f),m=e("1dff"),v=e("1bd7"),C=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"sidebar-left"},[e("div",{staticClass:"sidebar"},[e("user-profile-sidebar",{attrs:{"shall-show-user-profile-sidebar":t.shallShowUserProfileSidebar,"profile-user-data":t.profileUserData},on:{"close-sidebar":function(a){return t.$emit("update:shall-show-user-profile-sidebar",!1)}}}),e("div",{staticClass:"sidebar-content",class:{show:t.mqShallShowLeftSidebar}},[e("span",{staticClass:"sidebar-close-icon"},[e("feather-icon",{attrs:{icon:"XIcon",size:"16"},on:{click:function(a){return t.$emit("update:mq-shall-show-left-sidebar",!1)}}})],1),e("div",{staticClass:"chat-fixed-search"},[e("div",{staticClass:"d-flex align-items-center w-100"},[e("div",{staticClass:"sidebar-profile-toggle"},[e("b-avatar",{staticClass:"cursor-pointer badge-minimal avatar-border-2",attrs:{size:"42",src:t.profileUserMinimalData.avatar,variant:"transparent",badge:"","badge-variant":"success"},nativeOn:{click:function(a){return t.$emit("show-user-profile")}}})],1),e("b-input-group",{staticClass:"input-group-merge ml-1 w-100 round"},[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("feather-icon",{staticClass:"text-muted",attrs:{icon:"SearchIcon"}})],1),e("b-form-input",{attrs:{placeholder:"Search..."},model:{value:t.searchQuery,callback:function(a){t.searchQuery=a},expression:"searchQuery"}})],1)],1)]),e("vue-perfect-scrollbar",{staticClass:"chat-user-list-wrapper list-group scroll-area",attrs:{settings:t.perfectScrollbarSettings}},[e("h4",{staticClass:"chat-list-title"},[t._v(" Chats ")]),e("ul",{staticClass:"chat-users-list chat-list media-list"},t._l(t.filteredChatsContacts,(function(a){return e("chat-contact",{key:a.id,class:{active:t.activeChatContactId===a.id},attrs:{user:a,tag:"li","is-chat-contact":""},on:{click:function(e){return t.$emit("open-chat",a.id)}}})})),1),e("h4",{staticClass:"chat-list-title"},[t._v(" Contacts ")]),e("ul",{staticClass:"chat-users-list contact-list media-list"},t._l(t.filteredContacts,(function(a){return e("chat-contact",{key:a.id,attrs:{user:a,tag:"li"},on:{click:function(e){return t.$emit("open-chat",a.id)}}})})),1)])],1)],1)])},g=[],S=e("3656"),w=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(t.tag,t._g({tag:"component"},t.$listeners),[e("b-avatar",{staticClass:"badge-minimal",attrs:{size:"42",src:t.user.avatar,badge:t.isChatContact,"badge-variant":t.resolveAvatarBadgeVariant(t.user.status),variant:"transparent"}}),e("div",{staticClass:"chat-info flex-grow-1"},[e("h5",{staticClass:"mb-0"},[t._v(" "+t._s(t.user.fullName)+" ")]),e("p",{staticClass:"card-text text-truncate"},[t._v(" "+t._s(t.isChatContact?t.user.chat.lastMessage.message:t.user.about)+" ")])]),t.isChatContact?e("div",{staticClass:"chat-meta text-nowrap"},[e("small",{staticClass:"float-right mb-25 chat-time"},[t._v(t._s(t.formatDateToMonthShort(t.user.chat.lastMessage.time,{hour:"numeric",minute:"numeric"})))]),t.user.chat.unseenMsgs?e("b-badge",{staticClass:"float-right",attrs:{pill:"",variant:"primary"}},[t._v(" "+t._s(t.user.chat.unseenMsgs)+" ")]):t._e()],1):t._e()],1)},_=[],x=e("e98b"),y=e("0e20");function D(){const t=t=>"online"===t?"success":"busy"===t?"danger":"away"===t?"warning":"secondary";return{resolveAvatarBadgeVariant:t}}var I={components:{BAvatar:n["a"],BBadge:x["a"]},props:{tag:{type:String,default:"div"},user:{type:Object,required:!0},isChatContact:{type:Boolean,dedfault:!1}},setup(){const{resolveAvatarBadgeVariant:t}=D();return{formatDateToMonthShort:y["d"],resolveAvatarBadgeVariant:t}}},U=I,O=e("2877"),A=Object(O["a"])(U,w,_,!1,null,null,null),j=A.exports,k=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"chat-profile-sidebar",class:{show:t.shallShowUserProfileSidebar}},[e("header",{staticClass:"chat-profile-header"},[e("span",{staticClass:"close-icon"},[e("feather-icon",{attrs:{icon:"XIcon"},on:{click:function(a){return t.$emit("close-sidebar")}}})],1),e("div",{staticClass:"header-profile-sidebar"},[e("div",{staticClass:"avatar box-shadow-1 avatar-xl avatar-border"},[e("b-avatar",{attrs:{size:"70",src:t.profileUserData.avatar}}),e("span",{staticClass:"avatar-status-xl",class:"avatar-status-"+t.profileUserData.status})],1),e("h4",{staticClass:"chat-user-name"},[t._v(" "+t._s(t.profileUserData.fullName)+" ")]),e("span",{staticClass:"user-post text-capitalize"},[t._v(t._s(t.profileUserData.role))])])]),e("vue-perfect-scrollbar",{staticClass:"profile-sidebar-area scroll-area",attrs:{settings:t.perfectScrollbarSettings}},[e("h6",{staticClass:"section-label mb-1"},[t._v(" About ")]),e("div",{staticClass:"about-user"},[e("b-form-textarea",{attrs:{placeholder:"Something about yourself...",rows:"5"},model:{value:t.profileUserData.about,callback:function(a){t.$set(t.profileUserData,"about",a)},expression:"profileUserData.about"}})],1),e("h6",{staticClass:"section-label mb-1 mt-3"},[t._v(" Status ")]),e("b-form-radio-group",{attrs:{id:"user-status-options",stacked:""},model:{value:t.profileUserData.status,callback:function(a){t.$set(t.profileUserData,"status",a)},expression:"profileUserData.status"}},t._l(t.userStatusOptions,(function(a){return e("b-form-radio",{key:a.value,class:"custom-control-"+a.radioVariant,attrs:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),1),e("h6",{staticClass:"section-label mb-1 mt-2"},[t._v(" Settings ")]),t.profileUserData.settings?e("ul",{staticClass:"list-unstyled"},[e("li",{staticClass:"d-flex justify-content-between align-items-center mb-1"},[e("div",{staticClass:"d-flex align-items-center"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"CheckSquareIcon",size:"18"}}),e("span",{staticClass:"align-middle"},[t._v("Two-step Verification")])],1),e("b-form-checkbox",{attrs:{switch:""},model:{value:t.profileUserData.settings.isTwoStepAuthVerificationEnabled,callback:function(a){t.$set(t.profileUserData.settings,"isTwoStepAuthVerificationEnabled",a)},expression:"profileUserData.settings.isTwoStepAuthVerificationEnabled"}})],1),e("li",{staticClass:"d-flex justify-content-between align-items-center mb-1"},[e("div",{staticClass:"d-flex align-items-center"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"BellIcon",size:"18"}}),e("span",{staticClass:"align-middle"},[t._v("Notification")])],1),e("b-form-checkbox",{attrs:{switch:""},model:{value:t.profileUserData.settings.isNotificationsOn,callback:function(a){t.$set(t.profileUserData.settings,"isNotificationsOn",a)},expression:"profileUserData.settings.isNotificationsOn"}})],1),e("li",{staticClass:"mb-1 d-flex align-items-center cursor-pointer"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"UserIcon",size:"18"}}),e("span",{staticClass:"align-middle"},[t._v("Invite Friends")])],1),e("li",{staticClass:"d-flex align-items-center cursor-pointer"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"TrashIcon",size:"18"}}),e("span",{staticClass:"align-middle"},[t._v("Delete Account")])],1)]):t._e(),e("div",{staticClass:"mt-3"},[e("b-button",{attrs:{variant:"primary"}},[t._v(" Logout ")])],1)],1)],1)},B=[],M=e("9c7d"),P=e("2924"),q=e("9e14e"),z=e("c3e6"),L={components:{BAvatar:n["a"],BFormTextarea:M["a"],BFormRadioGroup:P["a"],BFormRadio:q["a"],BFormCheckbox:z["a"],BButton:p["a"],VuePerfectScrollbar:b.a},props:{shallShowUserProfileSidebar:{type:Boolean,required:!0},profileUserData:{type:Object,required:!0}},setup(){const t={maxScrollbarLength:150},a=[{text:"Active",value:"online",radioVariant:"success"},{text:"Do Not Disturb",value:"busy",radioVariant:"danger"},{text:"Away",value:"away",radioVariant:"warning"},{text:"Offline",value:"offline",radioVariant:"secondary"}];return{perfectScrollbarSettings:t,userStatusOptions:a}}},V=L,$=(e("16a3"),Object(O["a"])(V,k,B,!1,null,"d410e6a2",null)),T=$.exports,F={components:{BAvatar:n["a"],BInputGroup:d["a"],BInputGroupPrepend:S["a"],BFormInput:h["a"],VuePerfectScrollbar:b.a,ChatContact:j,UserProfileSidebar:T},props:{chatsContacts:{type:Array,required:!0},contacts:{type:Array,required:!0},shallShowUserProfileSidebar:{type:Boolean,required:!0},profileUserData:{type:Object,required:!0},profileUserMinimalData:{type:Object,required:!0},activeChatContactId:{type:Number,default:null},mqShallShowLeftSidebar:{type:Boolean,required:!0}},setup(t){const a={maxScrollbarLength:150},e=a=>t.contacts.find(t=>t.id===a),s=Object(c["ref"])(""),r=t=>t.fullName.toLowerCase().includes(s.value.toLowerCase()),i=Object(c["computed"])(()=>t.chatsContacts.filter(r)),n=Object(c["computed"])(()=>t.contacts.filter(r));return{searchQuery:s,filteredChatsContacts:i,filteredContacts:n,resolveChatContact:e,perfectScrollbarSettings:a}}},E=F,N=Object(O["a"])(E,C,g,!1,null,null,null),R=N.exports,G=e("7f80"),Q={namespaced:!0,state:{},getters:{},mutations:{},actions:{fetchChatsAndContacts(){return new Promise((t,a)=>{G["a"].get("/apps/chat/chats-and-contacts").then(a=>t(a)).catch(t=>a(t))})},getProfileUser(){return new Promise((t,a)=>{G["a"].get("/apps/chat/users/profile-user").then(a=>t(a)).catch(t=>a(t))})},getChat(t,{userId:a}){return new Promise((t,e)=>{G["a"].get("/apps/chat/chats/"+a).then(a=>t(a)).catch(t=>e(t))})},sendMessage(t,{contactId:a,message:e,senderId:s}){return new Promise((t,r)=>{G["a"].post("/apps/chat/chats/"+a,{message:e,senderId:s}).then(a=>t(a)).catch(t=>r(t))})}}},X=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"user-profile-sidebar",class:{show:t.shallShowActiveChatContactSidebar}},[t.contact?e("header",{staticClass:"user-profile-header"},[e("span",{staticClass:"close-icon"},[e("feather-icon",{attrs:{icon:"XIcon"},on:{click:function(a){return t.$emit("update:shall-show-active-chat-contact-sidebar",!1)}}})],1),e("div",{staticClass:"header-profile-sidebar"},[e("div",{staticClass:"avatar box-shadow-1 avatar-xl avatar-border"},[e("b-avatar",{attrs:{size:"70",src:t.contact.avatar}}),e("span",{staticClass:"avatar-status-xl",class:"avatar-status-"+t.contact.status})],1),e("h4",{staticClass:"chat-user-name"},[t._v(" "+t._s(t.contact.fullName)+" ")]),e("span",{staticClass:"user-post text-capitalize"},[t._v(t._s(t.contact.role))])])]):t._e(),e("vue-perfect-scrollbar",{staticClass:"user-profile-sidebar-area scroll-area",attrs:{settings:t.perfectScrollbarSettings}},[e("h6",{staticClass:"section-label mb-1"},[t._v(" About ")]),e("p",[t._v(t._s(t.contact.about))]),e("div",{staticClass:"personal-info"},[e("h6",{staticClass:"section-label mb-1 mt-3"},[t._v(" Personal Information ")]),e("ul",{staticClass:"list-unstyled"},[e("li",{staticClass:"mb-1"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"MailIcon",size:"16"}}),e("span",{staticClass:"align-middle"},[t._v("lucifer@email.com")])],1),e("li",{staticClass:"mb-1"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"PhoneCallIcon",size:"16"}}),e("span",{staticClass:"align-middle"},[t._v("+1(123) 456 - 7890")])],1),e("li",[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"ClockIcon",size:"16"}}),e("span",{staticClass:"align-middle"},[t._v("Mon - Fri 10AM - 8PM")])],1)])]),e("div",{staticClass:"more-options"},[e("h6",{staticClass:"section-label mb-1 mt-3"},[t._v(" Options ")]),e("ul",{staticClass:"list-unstyled"},[e("li",{staticClass:"cursor-pointer mb-1"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"TagIcon",size:"16"}}),e("span",{staticClass:"align-middle"},[t._v("Add Tag")])],1),e("li",{staticClass:"cursor-pointer mb-1"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"StarIcon",size:"16"}}),e("span",{staticClass:"align-middle"},[t._v("Important Contact")])],1),e("li",{staticClass:"cursor-pointer mb-1"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"ImageIcon",size:"16"}}),e("span",{staticClass:"align-middle"},[t._v("Shared Media")])],1),e("li",{staticClass:"cursor-pointer mb-1"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"TrashIcon",size:"16"}}),e("span",{staticClass:"align-middle"},[t._v("Delete Contact")])],1),e("li",{staticClass:"cursor-pointer"},[e("feather-icon",{staticClass:"mr-75",attrs:{icon:"SlashIcon",size:"16"}}),e("span",{staticClass:"align-middle"},[t._v("Block Contact")])],1)])])])],1)},J=[],Y={components:{BAvatar:n["a"],VuePerfectScrollbar:b.a},props:{shallShowActiveChatContactSidebar:{type:Boolean,required:!0},contact:{type:Object,required:!0}},setup(){const t={maxScrollbarLength:150};return{perfectScrollbarSettings:t}}},H=Y,W=Object(O["a"])(H,X,J,!1,null,null,null),K=W.exports,Z=e("aa5c"),tt={components:{BAvatar:n["a"],BDropdown:o["a"],BDropdownItem:l["a"],BForm:u["a"],BInputGroup:d["a"],BFormInput:h["a"],BButton:p["a"],VuePerfectScrollbar:b.a,ChatLeftSidebar:R,ChatActiveChatContentDetailsSidedbar:K,ChatLog:Z["a"]},setup(){const t="app-chat";i["a"].hasModule(t)||i["a"].registerModule(t,Q),Object(c["onUnmounted"])(()=>{i["a"].hasModule(t)&&i["a"].unregisterModule(t)});const{resolveAvatarBadgeVariant:a}=D(),e=Object(c["ref"])(null),s=()=>{const t=e.value.$el||e.value;t.scrollTop=t.scrollHeight},r=Object(c["ref"])([]),n=Object(c["ref"])([]),o=()=>{i["a"].dispatch("app-chat/fetchChatsAndContacts").then(t=>{r.value=t.data.chatsContacts,n.value=t.data.contacts,b.value=t.data.profileUser})};o();const l=Object(c["ref"])({}),u=Object(c["ref"])(""),d=t=>{u.value="",i["a"].dispatch("app-chat/getChat",{userId:t}).then(a=>{l.value=a.data;const e=r.value.find(a=>a.id===t);e&&(e.chat.unseenMsgs=0),Object(c["nextTick"])(()=>{s()})}),w.value=!1},h=()=>{if(!u.value)return;const t={contactId:l.value.contact.id,senderId:b.value.id,message:u.value};i["a"].dispatch("app-chat/sendMessage",t).then(t=>{const{newMessageData:a,chat:e}=t.data;void 0!==e?(l.value={chat:e,contact:l.value.contact},r.value.push({...l.value.contact,chat:{id:e.id,lastMessage:a,unseenMsgs:0}})):l.value.chat.chat.push(a),u.value="";const i=r.value.find(t=>t.id===l.value.contact.id);i.chat.lastMessage=a,Object(c["nextTick"])(()=>{s()})})},p={maxScrollbarLength:150},f=Object(c["ref"])({}),b=Object(c["ref"])({}),C=Object(c["ref"])(!1),g=()=>{i["a"].dispatch("app-chat/getProfileUser").then(t=>{f.value=t.data,C.value=!0})},S=Object(c["ref"])(!1),{mqShallShowLeftSidebar:w}=Object(v["a"])(),_=()=>{i["a"].state.app.windowWidth<m["a"].lg&&(w.value=!0)};return{resolveAvatarBadgeVariant:a,chatsContacts:r,contacts:n,refChatLogPS:e,activeChat:l,chatInputMessage:u,openChatOfContact:d,sendMessage:h,profileUserDataMinimal:b,profileUserData:f,shallShowUserProfileSidebar:C,showUserProfileSidebar:g,shallShowActiveChatContactSidebar:S,perfectScrollbarSettings:p,startConversation:_,mqShallShowLeftSidebar:w}}},at=tt,et=(e("0ddc"),Object(O["a"])(at,s,r,!1,null,"5e8ea5c2",null));a["default"]=et.exports},ca6e:function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return c})),e.d(a,"a",(function(){return n})),e.d(a,"d",(function(){return o}));var s=e("a18c"),r=e("ed09");const i=t=>"object"===typeof t&&null!==t,c=t=>{const a=new Date;return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear()},n=t=>{const{route:a}=s["a"].resolve(t);return a.path===s["a"].currentRoute.path},o=()=>{const t=Object(r["getCurrentInstance"])().proxy,a=Object(r["reactive"])({route:t.$route});return Object(r["watch"])(()=>t.$route,t=>{a.route=t}),{...Object(r["toRefs"])(a),router:t.$router}}}}]);